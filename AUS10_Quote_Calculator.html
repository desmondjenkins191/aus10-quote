<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0"/>
<meta name="apple-mobile-web-app-capable" content="yes"/>
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent"/>
<title>AUS-10 Quote Calculator</title>
<link href="https://fonts.googleapis.com/css2?family=Barlow+Condensed:wght@400;600;700;800;900&family=Barlow:wght@300;400;500;600&display=swap" rel="stylesheet"/>
<style>
:root {
  --green:       #1A6B3C;
  --green-mid:   #2E9E5B;
  --green-light: #E8F5EE;
  --green-lime:  #C8F542;
  --navy:        #0D1B2A;
  --navy-mid:    #1B2A4A;
  --white:       #FFFFFF;
  --off-white:   #F7F8F5;
  --gray-light:  #F0F2EE;
  --gray-mid:    #C8CCC6;
  --gray-dark:   #6B7068;
  --amber:       #F59E0B;
  --red:         #DC2626;
  --radius:      12px;
  --radius-lg:   18px;
  --shadow:      0 4px 24px rgba(13,27,42,0.12);
  --shadow-lg:   0 8px 40px rgba(13,27,42,0.18);
}

* { box-sizing: border-box; margin: 0; padding: 0; -webkit-tap-highlight-color: transparent; }

body {
  font-family: 'Barlow', sans-serif;
  background: var(--navy);
  color: var(--white);
  min-height: 100vh;
  padding-bottom: 120px;
}

/* â”€â”€ TOP BAR â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.topbar {
  position: sticky; top: 0; z-index: 100;
  background: var(--navy);
  border-bottom: 1px solid rgba(255,255,255,0.08);
  padding: 14px 20px 12px;
  display: flex; align-items: center; justify-content: space-between;
}
.topbar-logo {
  font-family: 'Barlow Condensed', sans-serif;
  font-weight: 900; font-size: 1.5rem; letter-spacing: -0.5px;
  color: var(--white);
  display: flex; align-items: center; gap: 2px;
}
.topbar-logo .highlight {
  position: relative; display: inline-block;
}
.topbar-logo .highlight::before {
  content: '';
  position: absolute; bottom: 2px; left: 0; right: 0; height: 3px;
  background: var(--green); border-radius: 2px; opacity: 0.7;
}
.topbar-sub {
  font-size: 0.65rem; letter-spacing: 0.14em; text-transform: uppercase;
  color: var(--green-mid); font-weight: 500;
}
.reset-btn {
  background: rgba(255,255,255,0.07); border: 1px solid rgba(255,255,255,0.12);
  color: var(--gray-mid); font-family: 'Barlow', sans-serif;
  font-size: 0.75rem; font-weight: 600; letter-spacing: 0.06em;
  padding: 6px 14px; border-radius: 20px; cursor: pointer;
  transition: all 0.2s;
}
.reset-btn:active { background: rgba(255,255,255,0.12); transform: scale(0.97); }

/* â”€â”€ MAIN CONTENT â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.content { padding: 16px 16px 0; max-width: 520px; margin: 0 auto; }

/* â”€â”€ SECTION CARDS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.card {
  background: var(--navy-mid);
  border: 1px solid rgba(255,255,255,0.07);
  border-radius: var(--radius-lg);
  margin-bottom: 12px;
  overflow: hidden;
}
.card-header {
  padding: 14px 18px 12px;
  display: flex; align-items: center; gap: 10px;
  border-bottom: 1px solid rgba(255,255,255,0.06);
  cursor: pointer; user-select: none;
}
.card-header-icon {
  width: 32px; height: 32px; border-radius: 8px;
  background: var(--green); display: flex; align-items: center;
  justify-content: center; font-size: 1rem; flex-shrink: 0;
}
.card-header-text { flex: 1; }
.card-header-title {
  font-family: 'Barlow Condensed', sans-serif;
  font-weight: 700; font-size: 1rem; letter-spacing: 0.04em;
  text-transform: uppercase; color: var(--white);
}
.card-header-sub {
  font-size: 0.72rem; color: var(--gray-mid); margin-top: 1px;
}
.card-chevron {
  color: var(--gray-mid); font-size: 1rem; transition: transform 0.25s;
}
.card.collapsed .card-chevron { transform: rotate(-90deg); }
.card-body { padding: 16px 18px 18px; }
.card.collapsed .card-body { display: none; }

/* â”€â”€ INPUTS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.field { margin-bottom: 14px; }
.field:last-child { margin-bottom: 0; }
.field-label {
  font-size: 0.72rem; font-weight: 600; letter-spacing: 0.1em;
  text-transform: uppercase; color: var(--gray-mid); margin-bottom: 6px;
  display: flex; align-items: center; justify-content: space-between;
}
.field-label .badge {
  font-size: 0.62rem; background: var(--green); color: var(--white);
  padding: 2px 8px; border-radius: 10px; letter-spacing: 0.06em;
  text-transform: uppercase; font-weight: 700;
}
.field-label .badge.required { background: var(--amber); color: var(--navy); }

.input-wrap { position: relative; }
.input-prefix {
  position: absolute; left: 14px; top: 50%; transform: translateY(-50%);
  font-size: 1rem; color: var(--gray-mid); pointer-events: none;
  font-weight: 600;
}
input[type="number"], input[type="text"], select {
  width: 100%; background: rgba(255,255,255,0.06);
  border: 1.5px solid rgba(255,255,255,0.1);
  border-radius: var(--radius); color: var(--white);
  font-family: 'Barlow', sans-serif; font-size: 1.1rem; font-weight: 600;
  padding: 13px 16px; outline: none; transition: border-color 0.2s, background 0.2s;
  -webkit-appearance: none; appearance: none;
}
input[type="number"].has-prefix { padding-left: 30px; }
input[type="number"]:focus, input[type="text"]:focus, select:focus {
  border-color: var(--green); background: rgba(26,107,60,0.12);
}
input[type="number"]::placeholder, input[type="text"]::placeholder { color: rgba(255,255,255,0.2); }
select option { background: var(--navy-mid); color: var(--white); }
input[type="number"]::-webkit-inner-spin-button,
input[type="number"]::-webkit-outer-spin-button { -webkit-appearance: none; }

/* story selector pills */
.pill-group { display: flex; gap: 8px; }
.pill {
  flex: 1; text-align: center; padding: 11px 4px;
  background: rgba(255,255,255,0.05); border: 1.5px solid rgba(255,255,255,0.1);
  border-radius: var(--radius); cursor: pointer; transition: all 0.18s;
  font-family: 'Barlow Condensed', sans-serif; font-weight: 700;
  font-size: 0.9rem; letter-spacing: 0.05em; color: var(--gray-mid);
}
.pill:active { transform: scale(0.96); }
.pill.active {
  background: var(--green); border-color: var(--green);
  color: var(--white); box-shadow: 0 0 0 3px rgba(26,107,60,0.25);
}
.pill-sub { font-size: 0.62rem; font-weight: 400; display: block; margin-top: 2px; color: inherit; opacity: 0.75; }

/* â”€â”€ ADD-ON ROWS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.addon-row {
  display: flex; align-items: center; gap: 12px;
  padding: 11px 0; border-bottom: 1px solid rgba(255,255,255,0.05);
}
.addon-row:last-child { border-bottom: none; padding-bottom: 0; }
.addon-info { flex: 1; min-width: 0; }
.addon-name {
  font-size: 0.88rem; font-weight: 600; color: var(--white);
  white-space: nowrap; overflow: hidden; text-overflow: ellipsis;
}
.addon-price { font-size: 0.72rem; color: var(--gray-mid); margin-top: 1px; }
.qty-control {
  display: flex; align-items: center; gap: 0; flex-shrink: 0;
  background: rgba(255,255,255,0.06); border-radius: 10px;
  border: 1.5px solid rgba(255,255,255,0.1); overflow: hidden;
}
.qty-btn {
  width: 36px; height: 36px; display: flex; align-items: center;
  justify-content: center; cursor: pointer; font-size: 1.2rem;
  font-weight: 600; color: var(--gray-mid); transition: all 0.15s;
  user-select: none; -webkit-user-select: none;
}
.qty-btn:active { background: rgba(26,107,60,0.3); color: var(--white); }
.qty-val {
  min-width: 32px; text-align: center; font-family: 'Barlow Condensed', sans-serif;
  font-weight: 700; font-size: 1rem; color: var(--white);
}
.qty-val.active { color: var(--green-lime); }
.addon-total {
  min-width: 60px; text-align: right; font-family: 'Barlow Condensed', sans-serif;
  font-weight: 700; font-size: 0.9rem; color: var(--gray-dark); flex-shrink: 0;
}
.addon-total.active { color: var(--green-mid); }

/* â”€â”€ ASSUMPTIONS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.assumption-row {
  display: flex; align-items: center; justify-content: space-between;
  padding: 8px 0; border-bottom: 1px solid rgba(255,255,255,0.04);
}
.assumption-row:last-child { border-bottom: none; }
.assumption-label { font-size: 0.8rem; color: var(--gray-mid); }
.assumption-val {
  font-family: 'Barlow Condensed', sans-serif; font-weight: 700;
  font-size: 0.9rem; color: var(--white); background: rgba(255,255,255,0.06);
  border: 1px solid rgba(255,255,255,0.1); border-radius: 8px;
  padding: 5px 10px; min-width: 70px; text-align: center;
  outline: none; font-family: 'Barlow', sans-serif;
  transition: border-color 0.2s;
}
.assumption-val:focus { border-color: var(--green); }

/* â”€â”€ RESULTS BREAKDOWN â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.breakdown { margin-top: 4px; }
.breakdown-row {
  display: flex; justify-content: space-between; align-items: center;
  padding: 9px 0; border-bottom: 1px solid rgba(255,255,255,0.05);
}
.breakdown-row:last-child { border-bottom: none; }
.breakdown-label { font-size: 0.85rem; color: var(--gray-mid); }
.breakdown-val {
  font-family: 'Barlow Condensed', sans-serif; font-weight: 700;
  font-size: 0.95rem; color: var(--white);
}
.breakdown-row.subtotal .breakdown-label { color: var(--white); font-weight: 600; }
.breakdown-row.subtotal .breakdown-val { font-size: 1.05rem; color: var(--green-mid); }

/* â”€â”€ MARGIN INDICATOR â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.margin-bar-wrap { margin: 12px 0 4px; }
.margin-bar-labels {
  display: flex; justify-content: space-between;
  font-size: 0.7rem; color: var(--gray-dark); margin-bottom: 5px;
}
.margin-bar-bg {
  height: 8px; background: rgba(255,255,255,0.07);
  border-radius: 4px; overflow: hidden;
}
.margin-bar-fill {
  height: 100%; border-radius: 4px; transition: width 0.4s ease, background 0.4s ease;
  background: var(--green);
}
.margin-status {
  font-size: 0.75rem; font-weight: 600; margin-top: 6px; text-align: center;
  letter-spacing: 0.06em;
}

/* â”€â”€ STICKY TOTAL â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.sticky-total {
  position: fixed; bottom: 0; left: 0; right: 0; z-index: 200;
  background: var(--green);
  padding: 0 20px;
  padding-bottom: env(safe-area-inset-bottom, 0px);
  box-shadow: 0 -8px 32px rgba(13,27,42,0.4);
}
.sticky-inner {
  max-width: 520px; margin: 0 auto;
  display: flex; align-items: center; justify-content: space-between;
  padding: 14px 0;
}
.sticky-left {}
.sticky-label {
  font-size: 0.65rem; letter-spacing: 0.15em; text-transform: uppercase;
  color: rgba(255,255,255,0.7); font-weight: 600;
}
.sticky-sqft {
  font-size: 0.75rem; color: rgba(255,255,255,0.6); margin-top: 1px;
}
.sticky-price {
  font-family: 'Barlow Condensed', sans-serif; font-weight: 900;
  font-size: 2.2rem; letter-spacing: -1px; color: var(--white);
  line-height: 1;
}
.sticky-right { text-align: right; }
.sticky-margin {
  font-family: 'Barlow Condensed', sans-serif; font-weight: 700;
  font-size: 1.1rem; color: rgba(255,255,255,0.9);
}
.sticky-persqft {
  font-size: 0.72rem; color: rgba(255,255,255,0.65); margin-top: 2px;
}

/* â”€â”€ PAYMENT SCHEDULE â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.payment-row {
  display: flex; align-items: center; justify-content: space-between;
  background: rgba(26,107,60,0.15); border: 1px solid rgba(26,107,60,0.3);
  border-radius: var(--radius); padding: 14px 16px; margin-bottom: 8px;
}
.payment-row:last-child { margin-bottom: 0; }
.payment-info {}
.payment-milestone { font-weight: 700; font-size: 0.92rem; }
.payment-timing { font-size: 0.72rem; color: var(--gray-mid); margin-top: 2px; }
.payment-amount {
  font-family: 'Barlow Condensed', sans-serif; font-weight: 900;
  font-size: 1.5rem; color: var(--green-mid); letter-spacing: -0.5px;
}

/* â”€â”€ SHARE / COPY â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.share-btn {
  width: 100%; padding: 15px; border-radius: var(--radius);
  background: var(--navy-mid); border: 1.5px solid rgba(255,255,255,0.1);
  color: var(--white); font-family: 'Barlow Condensed', sans-serif;
  font-weight: 700; font-size: 1rem; letter-spacing: 0.08em;
  text-transform: uppercase; cursor: pointer; transition: all 0.2s;
  display: flex; align-items: center; justify-content: center; gap: 8px;
  margin-bottom: 8px;
}
.share-btn:active { transform: scale(0.98); background: rgba(255,255,255,0.1); }
.share-btn.primary {
  background: var(--green); border-color: var(--green);
}

/* â”€â”€ ANIMATIONS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
@keyframes fadeUp {
  from { opacity: 0; transform: translateY(16px); }
  to   { opacity: 1; transform: translateY(0); }
}
.card { animation: fadeUp 0.3s ease both; }
.card:nth-child(1) { animation-delay: 0.05s; }
.card:nth-child(2) { animation-delay: 0.10s; }
.card:nth-child(3) { animation-delay: 0.15s; }
.card:nth-child(4) { animation-delay: 0.20s; }
.card:nth-child(5) { animation-delay: 0.25s; }

/* â”€â”€ EMPTY STATE â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.empty-hint {
  text-align: center; padding: 20px;
  font-size: 0.82rem; color: var(--gray-dark); font-style: italic;
}
</style>
</head>
<body>

<!-- TOP BAR -->
<div class="topbar">
  <div>
    <div class="topbar-logo">AUS-<span class="highlight">10</span>&nbsp;PAINT</div>
    <div class="topbar-sub">Residential Quote Calculator</div>
  </div>
  <button class="reset-btn" onclick="resetAll()">â†º Reset</button>
</div>

<div class="content">

  <!-- â”€â”€ PROJECT DETAILS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
  <div class="card" id="card-project">
    <div class="card-header" onclick="toggleCard('card-project')">
      <div class="card-header-icon">ğŸ“</div>
      <div class="card-header-text">
        <div class="card-header-title">Project Details</div>
        <div class="card-header-sub">Square footage, stories, location</div>
      </div>
      <div class="card-chevron">â€º</div>
    </div>
    <div class="card-body">

      <div class="field">
        <div class="field-label">
          Total Square Footage
          <span class="badge required">Required</span>
        </div>
        <div class="input-wrap">
          <input type="number" id="sqft" placeholder="e.g. 1800" inputmode="numeric"
            oninput="calculate()" min="0"/>
        </div>
      </div>

      <div class="field">
        <div class="field-label">Number of Stories</div>
        <div class="pill-group">
          <div class="pill active" data-mult="1.0" onclick="selectStory(this)">
            1 Story <span class="pill-sub">1.0Ã—</span>
          </div>
          <div class="pill" data-mult="1.15" onclick="selectStory(this)">
            2 Stories <span class="pill-sub">1.15Ã—</span>
          </div>
          <div class="pill" data-mult="1.30" onclick="selectStory(this)">
            3 Stories <span class="pill-sub">1.30Ã—</span>
          </div>
        </div>
      </div>

      <div class="field">
        <div class="field-label">Home Base / Market</div>
        <select id="market" onchange="calculate()">
          <option value="Houston, TX">Houston, TX</option>
          <option value="Dallas, TX">Dallas, TX</option>
          <option value="Charlotte, NC">Charlotte, NC</option>
          <option value="Raleigh, NC">Raleigh, NC</option>
        </select>
      </div>

      <div class="field">
        <div class="field-label">Job Address <span style="font-size:0.65rem;color:var(--gray-dark);text-transform:none;letter-spacing:0">(for reference)</span></div>
        <input type="text" id="address" placeholder="123 Main St, Houston, TX"/>
      </div>

    </div>
  </div>

  <!-- â”€â”€ ADD-ON SERVICES â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
  <div class="card" id="card-addons">
    <div class="card-header" onclick="toggleCard('card-addons')">
      <div class="card-header-icon">â•</div>
      <div class="card-header-text">
        <div class="card-header-title">Add-On Services</div>
        <div class="card-header-sub" id="addon-summary">None selected</div>
      </div>
      <div class="card-chevron">â€º</div>
    </div>
    <div class="card-body" id="addon-body">
      <!-- rendered by JS -->
    </div>
  </div>

  <!-- â”€â”€ PRICE BREAKDOWN â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
  <div class="card" id="card-breakdown">
    <div class="card-header" onclick="toggleCard('card-breakdown')">
      <div class="card-header-icon">ğŸ“Š</div>
      <div class="card-header-text">
        <div class="card-header-title">Price Breakdown</div>
        <div class="card-header-sub">Materials Â· Labor Â· Profit</div>
      </div>
      <div class="card-chevron">â€º</div>
    </div>
    <div class="card-body">
      <div class="breakdown" id="breakdown-body">
        <div class="empty-hint">Enter square footage to see breakdown</div>
      </div>
    </div>
  </div>

  <!-- â”€â”€ PAYMENT SCHEDULE â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
  <div class="card" id="card-payment">
    <div class="card-header" onclick="toggleCard('card-payment')">
      <div class="card-header-icon">ğŸ’³</div>
      <div class="card-header-text">
        <div class="card-header-title">Payment Schedule</div>
        <div class="card-header-sub">50% deposit Â· 50% on completion</div>
      </div>
      <div class="card-chevron">â€º</div>
    </div>
    <div class="card-body" id="payment-body">
      <div class="empty-hint">Price calculates first</div>
    </div>
  </div>

  <!-- â”€â”€ ASSUMPTIONS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
  <div class="card collapsed" id="card-assumptions">
    <div class="card-header" onclick="toggleCard('card-assumptions')">
      <div class="card-header-icon">âš™ï¸</div>
      <div class="card-header-text">
        <div class="card-header-title">Pricing Assumptions</div>
        <div class="card-header-sub">Tap to adjust rates</div>
      </div>
      <div class="card-chevron">â€º</div>
    </div>
    <div class="card-body">
      <div id="assumptions-body"></div>
    </div>
  </div>

  <!-- â”€â”€ SHARE â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
  <div class="card" id="card-share">
    <div class="card-header" onclick="toggleCard('card-share')">
      <div class="card-header-icon">ğŸ“¤</div>
      <div class="card-header-text">
        <div class="card-header-title">Share Quote</div>
        <div class="card-header-sub">Copy summary to send to client</div>
      </div>
      <div class="card-chevron">â€º</div>
    </div>
    <div class="card-body">
      <button class="share-btn primary" onclick="copyQuote()">ğŸ“‹ Copy Quote Summary</button>
      <button class="share-btn" onclick="shareQuote()">â†— Share via Messages / Email</button>
    </div>
  </div>

</div><!-- /content -->

<!-- STICKY TOTAL -->
<div class="sticky-total">
  <div class="sticky-inner">
    <div class="sticky-left">
      <div class="sticky-label">Total Quote</div>
      <div class="sticky-price" id="sticky-price">â€”</div>
      <div class="sticky-sqft" id="sticky-sqft"></div>
    </div>
    <div class="sticky-right">
      <div class="sticky-margin" id="sticky-margin"></div>
      <div class="sticky-persqft" id="sticky-persqft"></div>
    </div>
  </div>
</div>

<script>
// â”€â”€ STATE â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
const state = {
  sqft: 0,
  storyMult: 1.0,
  addons: {},
  // Assumptions
  paintPrice: 37.95,
  taxRate: 0.0825,
  coverage: 350,
  textureFactor: 0.30,
  supplies: 75,
  laborRate: 1000,
  crewOutput: 1000,
  profitMargin: 0.17,
  addonProfitRate: 0.32,
  mobilizationFee: 50,
};

// â”€â”€ ADD-ON DEFINITIONS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
const ADDONS = [
  { id:'garage',      name:'Garage',                    price:538,   unit:'flat' },
  { id:'doors',       name:'Doors (set of 5)',           price:362,   unit:'flat' },
  { id:'cabinets',    name:'Full Kitchen Cabinets',      price:2704,  unit:'flat' },
  { id:'deck',        name:'Patio / Deck Painting',      price:729,   unit:'flat' },
  { id:'caulking',    name:'Caulking',                   price:15,    unit:'per opening' },
  { id:'wallpaper',   name:'Wallpaper Removal',          price:1.50,  unit:'per sqft' },
  { id:'pressure',    name:'Pressure Washing',           price:0.25,  unit:'per sqft' },
  { id:'popcorn',     name:'Popcorn Ceiling Removal',    price:2.00,  unit:'per sqft' },
  { id:'furniture',   name:'Furniture Moving',           price:85,    unit:'per room' },
  { id:'fence',       name:'Fence / Shed Painting',      price:350,   unit:'flat' },
];

// â”€â”€ ASSUMPTIONS CONFIG â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
const ASSUMPTIONS = [
  { key:'paintPrice',      label:'Paint $/Gallon',         fmt:'$',    step:0.01 },
  { key:'taxRate',         label:'Sales Tax %',            fmt:'%',    step:0.001 },
  { key:'coverage',        label:'Gallon Coverage (sqft)', fmt:'',     step:1 },
  { key:'textureFactor',   label:'Texture Waste %',        fmt:'%',    step:0.01 },
  { key:'supplies',        label:'Supplies Flat Fee',      fmt:'$',    step:1 },
  { key:'laborRate',       label:'Labor Rate/Day',         fmt:'$',    step:50 },
  { key:'crewOutput',      label:'Crew Output sqft/Day',   fmt:'',     step:50 },
  { key:'profitMargin',    label:'Base Profit Margin %',   fmt:'%',    step:0.01 },
  { key:'addonProfitRate', label:'Add-On Profit Rate %',   fmt:'%',    step:0.01 },
  { key:'mobilizationFee', label:'Mobilization Fee',       fmt:'$',    step:5 },
];

// â”€â”€ INIT â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
document.addEventListener('DOMContentLoaded', () => {
  renderAddons();
  renderAssumptions();
  calculate();
});

// â”€â”€ RENDER ADD-ONS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function renderAddons() {
  const body = document.getElementById('addon-body');
  body.innerHTML = ADDONS.map(a => {
    state.addons[a.id] = 0;
    return `
    <div class="addon-row">
      <div class="addon-info">
        <div class="addon-name">${a.name}</div>
        <div class="addon-price">${fmtPrice(a.price)} ${a.unit}</div>
      </div>
      <div class="qty-control">
        <div class="qty-btn" onclick="changeQty('${a.id}',-1)">âˆ’</div>
        <div class="qty-val" id="qty-${a.id}">0</div>
        <div class="qty-btn" onclick="changeQty('${a.id}',1)">+</div>
      </div>
      <div class="addon-total" id="total-${a.id}">â€”</div>
    </div>`;
  }).join('');
}

// â”€â”€ RENDER ASSUMPTIONS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function renderAssumptions() {
  const body = document.getElementById('assumptions-body');
  body.innerHTML = ASSUMPTIONS.map(a => {
    const display = a.fmt === '%'
      ? (state[a.key]*100).toFixed(a.key==='taxRate'?2:0)
      : a.fmt === '$'
        ? state[a.key].toFixed(2)
        : state[a.key];
    return `
    <div class="assumption-row">
      <div class="assumption-label">${a.label}</div>
      <input class="assumption-val" type="number"
        id="asmp-${a.key}" value="${display}"
        step="${a.step}" inputmode="decimal"
        onchange="updateAssumption('${a.key}','${a.fmt}',this.value)"/>
    </div>`;
  }).join('');
}

function updateAssumption(key, fmt, val) {
  const v = parseFloat(val) || 0;
  state[key] = fmt === '%' ? v/100 : v;
  calculate();
}

// â”€â”€ QTY CONTROLS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function changeQty(id, delta) {
  state.addons[id] = Math.max(0, (state.addons[id]||0) + delta);
  const qtyEl = document.getElementById(`qty-${id}`);
  const totEl = document.getElementById(`total-${id}`);
  const addon = ADDONS.find(a => a.id === id);
  qtyEl.textContent = state.addons[id];
  qtyEl.className = 'qty-val' + (state.addons[id] > 0 ? ' active' : '');
  const lineTotal = state.addons[id] * addon.price;
  totEl.textContent = state.addons[id] > 0 ? fmt$(lineTotal) : 'â€”';
  totEl.className = 'addon-total' + (state.addons[id] > 0 ? ' active' : '');
  calculate();
}

// â”€â”€ STORY SELECT â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function selectStory(el) {
  document.querySelectorAll('.pill').forEach(p => p.classList.remove('active'));
  el.classList.add('active');
  state.storyMult = parseFloat(el.dataset.mult);
  calculate();
}

// â”€â”€ TOGGLE CARD â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function toggleCard(id) {
  document.getElementById(id).classList.toggle('collapsed');
}

// â”€â”€ FORMAT HELPERS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function fmt$(n) {
  if (!n && n !== 0) return 'â€”';
  return '$' + n.toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g, ',');
}
function fmtPrice(n) {
  return n < 10 ? '$' + n.toFixed(2) : '$' + n.toFixed(0);
}
function fmtK(n) {
  if (n >= 1000) return '$' + (n/1000).toFixed(1) + 'k';
  return fmt$(n);
}

// â”€â”€ CORE CALCULATE â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function calculate() {
  const sqft = parseFloat(document.getElementById('sqft').value) || 0;
  state.sqft = sqft;

  // Materials
  const paintArea     = sqft * 2 * state.storyMult;
  const textureAdj    = paintArea * state.textureFactor;
  const adjustedArea  = paintArea + textureAdj;
  const gallons       = Math.ceil(adjustedArea / state.coverage * 10) / 10;
  const paintCost     = gallons * state.paintPrice;
  const taxAmt        = paintCost * state.taxRate;
  const paintAfterTax = paintCost + taxAmt;
  const suppliesCost  = sqft > 0 ? state.supplies : 0;
  const totalMaterials = paintAfterTax + suppliesCost;

  // Labor
  const days        = Math.ceil((sqft / state.crewOutput) * state.storyMult * 10) / 10;
  const totalLabor  = days * state.laborRate;

  // Add-ons
  let totalAddons = 0;
  ADDONS.forEach(a => {
    totalAddons += (state.addons[a.id] || 0) * a.price;
  });

  // Mobilization
  const mobFee = sqft > 0 ? state.mobilizationFee : 0;

  // Subtotal & profit
  const subtotal    = totalMaterials + totalLabor + totalAddons + mobFee;
  const baseProfit  = (totalMaterials + totalLabor) * state.profitMargin;
  const addonProfit = totalAddons * state.addonProfitRate;
  const totalProfit = baseProfit + addonProfit;
  const grandTotal  = subtotal + totalProfit;

  // Margin
  const margin = grandTotal > 0 ? totalProfit / grandTotal : 0;
  const perSqft = sqft > 0 ? grandTotal / sqft : 0;

  // â”€â”€ Update sticky bar â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  document.getElementById('sticky-price').textContent = sqft > 0 ? fmt$(grandTotal) : 'â€”';
  document.getElementById('sticky-sqft').textContent  = sqft > 0 ? `${sqft.toLocaleString()} sqft` : '';
  const marginPct = (margin*100).toFixed(1) + '%';
  const marginEl  = document.getElementById('sticky-margin');
  marginEl.textContent = sqft > 0 ? marginPct + ' margin' : '';
  marginEl.style.color = margin >= 0.30 ? 'rgba(255,255,255,0.95)'
                       : margin >= 0.20 ? '#F59E0B' : '#DC2626';
  document.getElementById('sticky-persqft').textContent = sqft > 0 ? fmt$(perSqft) + '/sqft' : '';

  // â”€â”€ Update breakdown â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  const bdEl = document.getElementById('breakdown-body');
  if (sqft === 0) {
    bdEl.innerHTML = '<div class="empty-hint">Enter square footage to see breakdown</div>';
  } else {
    const marginColor = margin >= 0.30 ? 'var(--green-mid)'
                      : margin >= 0.20 ? 'var(--amber)' : 'var(--red)';
    const marginMsg   = margin >= 0.45 ? 'ğŸ”¥ Excellent margin'
                      : margin >= 0.30 ? 'âœ… Healthy margin'
                      : margin >= 0.20 ? 'âš ï¸ Tight â€” consider add-ons'
                      :                  'ğŸ”´ Below target â€” review job';
    const marginWidth = Math.min(margin * 100 * 2, 100); // scale: 50% = full bar

    bdEl.innerHTML = `
      <div class="breakdown-row"><span class="breakdown-label">ğŸ¨ Paint (${gallons.toFixed(1)} gal + tax)</span><span class="breakdown-val">${fmt$(paintAfterTax)}</span></div>
      <div class="breakdown-row"><span class="breakdown-label">ğŸ§¹ Supplies (flat)</span><span class="breakdown-val">${fmt$(suppliesCost)}</span></div>
      <div class="breakdown-row"><span class="breakdown-label">ğŸ‘· Labor (${days.toFixed(1)} days)</span><span class="breakdown-val">${fmt$(totalLabor)}</span></div>
      ${totalAddons > 0 ? `<div class="breakdown-row"><span class="breakdown-label">â• Add-Ons</span><span class="breakdown-val">${fmt$(totalAddons)}</span></div>` : ''}
      <div class="breakdown-row"><span class="breakdown-label">ğŸš— Mobilization</span><span class="breakdown-val">${fmt$(mobFee)}</span></div>
      <div class="breakdown-row subtotal"><span class="breakdown-label">Cost Subtotal</span><span class="breakdown-val">${fmt$(subtotal)}</span></div>
      <div class="breakdown-row"><span class="breakdown-label">ğŸ’° Profit</span><span class="breakdown-val" style="color:var(--green-mid)">${fmt$(totalProfit)}</span></div>

      <div class="margin-bar-wrap">
        <div class="margin-bar-labels">
          <span>0%</span><span>Target 30â€“45%</span><span>50%+</span>
        </div>
        <div class="margin-bar-bg">
          <div class="margin-bar-fill" style="width:${marginWidth}%;background:${marginColor}"></div>
        </div>
        <div class="margin-status" style="color:${marginColor}">${marginMsg} Â· ${marginPct}</div>
      </div>`;
  }

  // â”€â”€ Update addon summary â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  const activeAddons = ADDONS.filter(a => (state.addons[a.id]||0) > 0);
  document.getElementById('addon-summary').textContent =
    activeAddons.length === 0 ? 'None selected'
    : activeAddons.length === 1 ? activeAddons[0].name
    : `${activeAddons.length} services Â· ${fmt$(totalAddons)}`;

  // â”€â”€ Update payment schedule â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  const pmtEl = document.getElementById('payment-body');
  if (grandTotal === 0) {
    pmtEl.innerHTML = '<div class="empty-hint">Price calculates first</div>';
  } else {
    const deposit = grandTotal * 0.50;
    const final   = grandTotal * 0.50;
    pmtEl.innerHTML = `
      <div class="payment-row">
        <div class="payment-info">
          <div class="payment-milestone">ğŸ’° Deposit â€” Due at Signing</div>
          <div class="payment-timing">Before work begins Â· Required to hold date</div>
        </div>
        <div class="payment-amount">${fmt$(deposit)}</div>
      </div>
      <div class="payment-row">
        <div class="payment-info">
          <div class="payment-milestone">âœ… Final Payment â€” On Completion</div>
          <div class="payment-timing">After walk-through sign-off</div>
        </div>
        <div class="payment-amount">${fmt$(final)}</div>
      </div>`;
  }

  // Store for share
  window._lastCalc = { sqft, gallons, days, totalMaterials, totalLabor,
    totalAddons, mobFee, subtotal, totalProfit, grandTotal, margin, perSqft,
    activeAddons, market: document.getElementById('market').value,
    address: document.getElementById('address').value };
}

// â”€â”€ RESET â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function resetAll() {
  document.getElementById('sqft').value = '';
  document.getElementById('address').value = '';
  document.getElementById('market').value = 'Houston, TX';
  document.querySelectorAll('.pill').forEach((p,i) => p.classList.toggle('active', i===0));
  state.storyMult = 1.0;
  ADDONS.forEach(a => {
    state.addons[a.id] = 0;
    const q = document.getElementById(`qty-${a.id}`);
    const t = document.getElementById(`total-${a.id}`);
    if (q) { q.textContent = '0'; q.className = 'qty-val'; }
    if (t) { t.textContent = 'â€”'; t.className = 'addon-total'; }
  });
  calculate();
}

// â”€â”€ COPY QUOTE â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function copyQuote() {
  const c = window._lastCalc;
  if (!c || c.sqft === 0) { alert('Enter square footage first.'); return; }
  const today = new Date();
  const exp   = new Date(today); exp.setDate(exp.getDate()+30);
  const fmtDate = d => d.toLocaleDateString('en-US',{month:'short',day:'numeric',year:'numeric'});

  let addonLines = c.activeAddons.map(a =>
    `  â€¢ ${a.name}: ${ADDONS.find(x=>x.id===a.id) ? state.addons[a.id] + ' Ã— ' + fmtPrice(ADDONS.find(x=>x.id===a.id).price) : ''} = ${fmt$(state.addons[a.id] * ADDONS.find(x=>x.id===a.id).price)}`
  ).join('\n');

  const txt = `AUS-10 PAINT â€” RESIDENTIAL QUOTE
${'â”€'.repeat(34)}
Date: ${fmtDate(today)}
Valid Through: ${fmtDate(exp)}
${c.address ? 'Address: ' + c.address : ''}
Market: ${c.market}
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Total Square Footage: ${c.sqft.toLocaleString()} sqft
Story Multiplier: ${state.storyMult}Ã—
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
MATERIALS
  Paint (${c.gallons.toFixed(1)} gal + 8.25% tax): ${fmt$(c.totalMaterials - state.supplies)}
  Supplies (flat):                ${fmt$(state.supplies)}
LABOR
  ${c.days.toFixed(1)} days Ã— $${state.laborRate.toLocaleString()}/day: ${fmt$(c.totalLabor)}
${c.activeAddons.length > 0 ? 'ADD-ONS\n' + addonLines : ''}
  Mobilization Fee:               ${fmt$(c.mobFee)}
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Subtotal:                    ${fmt$(c.subtotal)}
Profit (17% base + 32% add-ons): ${fmt$(c.totalProfit)}
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
â˜… TOTAL QUOTE:               ${fmt$(c.grandTotal)}
  Effective rate:            ${fmt$(c.perSqft)}/sqft
  Gross Margin:              ${(c.margin*100).toFixed(1)}%
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
PAYMENT SCHEDULE
  50% Deposit (due at signing):  ${fmt$(c.grandTotal*0.5)}
  50% Final (upon completion):   ${fmt$(c.grandTotal*0.5)}
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
AUS-10 Paint, LLC Â· Flawless Finish. Every Time.
Desmond Jenkins, CEO Â· (346) 336-9263
HUB Certified Â· Minority Owned Business`;

  navigator.clipboard.writeText(txt).then(() => {
    const btn = document.querySelector('.share-btn.primary');
    btn.textContent = 'âœ… Copied to Clipboard!';
    setTimeout(() => btn.innerHTML = 'ğŸ“‹ Copy Quote Summary', 2000);
  }).catch(() => {
    const ta = document.createElement('textarea');
    ta.value = txt; document.body.appendChild(ta);
    ta.select(); document.execCommand('copy'); document.body.removeChild(ta);
    alert('Quote copied!');
  });
}

// â”€â”€ SHARE â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function shareQuote() {
  const c = window._lastCalc;
  if (!c || c.sqft === 0) { alert('Enter square footage first.'); return; }
  const text = `AUS-10 Paint Quote â€” ${c.sqft.toLocaleString()} sqft${c.address ? ' at ' + c.address : ''}\n\nTotal: ${fmt$(c.grandTotal)}\n50% deposit: ${fmt$(c.grandTotal*0.5)}\n50% on completion: ${fmt$(c.grandTotal*0.5)}\n\nFlawless Finish. Every Time.\nDesmond Jenkins Â· (346) 336-9263`;
  if (navigator.share) {
    navigator.share({ title: 'AUS-10 Paint Quote', text });
  } else {
    navigator.clipboard.writeText(text).then(() => alert('Short quote copied!'));
  }
}
</script>
</body>
</html>
